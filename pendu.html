<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    * {
        margin: 0;
    }
:root{
        --bg-1: rgb(240, 248, 242);
        --bg-2: rgb(200, 230, 210);
        --extra: rgb(141, 198, 154);
        --text: #000000;
    }
    
    .dark{
        --bg-1: rgb(34, 77, 44);
        --bg-2: rgb(20, 48, 29);
        --extra: rgb(80, 156, 98);
        --text: rgb(181, 228, 178);
    }
    .light{
        --bg-1: rgb(240, 248, 242);
        --bg-2: rgb(200, 230, 210);
        --extra: rgb(141, 198, 154);
        --text: #000000;
    }
    body {
        background: linear-gradient(var(--bg-1),var(--bg-2));
        display: flex;
        flex-direction: column;
        align-items: center;
        color: var(--text);
        height: 100vh;

    }
    nav{
        background-color: var(--extra);
        width: 100%;
        padding: 10px 0;
    }
    ul{
        list-style-type: none;
        display: flex;
        justify-content: center;
        gap: 40px;
        padding: 15px 0;
    }
    li{
        display: flex;
        color: rgb(0, 48, 0);
        font-size: 1.4rem;
    }
    .navbtn a{
        text-decoration: none;
        color: rgb(0, 48, 0);
        font-size: 1.4rem;
        transition: 0.2s ease-in-out;
        display: inline-block;
    }
    .navbtn:hover{
        transform: scale(1.05);
        text-decoration: underline;
    }
    #title {
        text-align: center;
        margin: 30px;
    }
    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        max-width: 1000px;
    }
    .section {
        padding-top: 50px;
        text-align: center;
    }
    #letters {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        margin-top: 15px;
        max-width: 450px;
        justify-content: center;
    }
    .letter {
        border: 1px solid black;
        background-color: transparent;
        padding: 5px;
        margin: 2px;
        width: 35px;
        height: 35px;
        text-align: center;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
    }
    #word {
        display: block;
        font-size: 2em;
        letter-spacing: 10px;
        margin: 20px 0;
        font-family: monospace;
        height: 1.5em;
    }
    .container p {
        font-size: 1.1em;
        margin-bottom: 10px;
    }
    .btn {
        padding: 10px 20px;
        margin-right: 10px;
        margin-top: 20px;
        font-size: 1em;
        cursor: pointer;
    }
    .topbar{
        background-color: var(--text);
        color: var(--bg-1);
        width: 100%;
    }
    .nav-right{
        display: flex;
        gap: 30px;
        margin-left: 200px;
    }
    #slider{
        height: 15px;
        width: 15px;
        border-radius: 100%;
        background-color: rgba(0, 0, 0, 0.79);
        margin-top: 5px;
    }
    .right{
        animation: slideR 1s forwards;
    }
    .left{
        animation: slideL 1s forwards;
    }
    @keyframes slideR {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(20px);
        }
    }
    @keyframes slideL {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(-20px);
        }
    }
</style>

<body>
    <div id="topbar"></div>
    <nav>
        <ul>
            <li class="navbtn"><a href="acceuil.html">Accueil</a></li>
            <li class="navbtn"><a href="explore.html">Explorer la Terre verte</a></li>
            <li class="navbtn"><a href="pendu.html">Jeu du pendu</a></li>
            <li class="navbtn"><a href="activite.html">Quiz</a></li>
            <div class="nav-right">
                <li><a id="sombre">Sombre</a></li>
            <li><div id="slider"></div></li>
            <li><a id="clair">Clair</a></li>
            </div>
        </ul>
    </nav>
    <div id="title">
        <h1>Jeu Du Pendu</h1>
        <p>Un jeu tres difficile</p>
    </div>

    <div class="container">
        <div>
            <svg height="500px" width="400px" ">
                <circle cx="200" cy="125" r="35" style="fill:rgb(145, 201, 158); stroke: black; stroke-width:3px" />
                <line x1="200" y1="90" x2="200" y2="50" style="stroke: black; stroke-width:3px" />
                <line x1="200" y1="50" x2="100" y2="50" style="stroke: black; stroke-width:3px" />
                <line x1="100" y1="50" x2="100" y2="420" style="stroke: black; stroke-width:3px" />
                <rect x="85" y="420" width="200" height="10"
                    style="stroke: black; stroke-width:3px; fill:rgb(26, 26, 26)" />
                <line id="torso" x1="200" y1="160" x2="200" y2="300" style="stroke: black; stroke-width:3px" />
                <line id="right-arm" x1="200" y1="200" x2="240" y2="260" style="stroke: black; stroke-width:3px" />
                <line id="left-arm" x1="200" y1="200" x2="160" y2="260" style="stroke: black; stroke-width:3px" />
                <line id="right-leg" x1="200" y1="300" x2="240" y2="360" style="stroke: black; stroke-width:3px" />
                <line id="left-leg" x1="200" y1="300" x2="160" y2="360" style="stroke: black; stroke-width:3px" />

            </svg>
        </div>
        <div class="section">
            <p>Cliquer sur un caractere et deviner le mot</p>
            <b id="word"></b>
            <div id="letters"></div>
            <button type="button" class="btn">Jouer</button>
            <button type="button" class="btn">Continuer Partie</button>
        </div>

    </div>


</body>
<script>
    let topbar = document.getElementById("topbar");
    topbar.innerHTML = "Bienvenue " + localStorage.getItem("prenom") + " " + localStorage.getItem("nom") + " (" + localStorage.getItem("pseudo") + "), Age: " + localStorage.getItem("age");

    let body = document.body;
    let slider = document.getElementById("slider");
    let sombre = document.getElementById("sombre");
    let clair = document.getElementById("clair");

    body.classList.add(localStorage.getItem("mode") || "light");
    sombre.addEventListener("click", function () {
        slider.classList.remove("right");
        slider.classList.add("left");
        body.classList.remove("light");
        body.classList.add("dark");
        localStorage.setItem("mode","dark");
    });
    clair.addEventListener("click", function () {
        slider.classList.remove("left");
        slider.classList.add("right");
        body.classList.remove("dark");
        body.classList.add("light");
        localStorage.setItem("mode","light");
    });

    let torso = document.getElementById("torso");
    let ra = document.getElementById("right-arm");
    let la = document.getElementById("left-arm");
    let rf = document.getElementById("right-leg");
    let lf = document.getElementById("left-leg");
    let word = document.getElementById("word");
    let letters = document.getElementById("letters");
    let alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    let attempts = 5;
    for (let i = 0; i < 26; i++) {
        let letter = document.createElement("button");
        letter.textContent = alphabet[i];
        letter.classList.add("letter");
        letters.appendChild(letter);
    }
    const words = [
        "recyclage", "biodiversite", "pollution", "foret", "ocean",
        "dechet", "climat", "energie", "sol", "eau",
        "animaux", "plantes", "compost", "planete", "conservation"
    ];

    const randomIndex = Math.floor(Math.random() * words.length);
    const chosenWord = words[randomIndex];

    displayedWord = "";
    for (let i = 0; i < chosenWord.length; i++)
        displayedWord += "*";
    word.textContent = displayedWord;


    let letterbtns = Array.from(document.getElementsByClassName("letter"));
    letterbtns.forEach(btn => {
        btn.addEventListener("click", function () {
            let guess = btn.textContent.toLowerCase();
            btn.disabled = true;
            let correct = false;
            let newWord = "";
            for (let i = 0; i < chosenWord.length; i++) {
                if (guess === chosenWord[i]) {
                    newWord += guess;
                    correct = true;
                }
                else {
                    newWord += displayedWord[i];
                }
            }
            displayedWord = newWord;
            word.textContent = displayedWord;
            if (!correct) {
                attempts--;
                btn.style.backgroundColor = "red";
                removelimb();
                if (attempts <= 0) {
                    letterbtns.forEach(btn => btn.disabled = true);
                    alert("Game over!");
                }
            }
            else {
                btn.style.backgroundColor = "green";
            }
            if (!displayedWord.includes('*')) {
                letterbtns.forEach(btn => btn.disabled = true);
                localStorage.setItem("penduscore",attempts);
                alert("You won!");
            }

        })
    })

    function removelimb() {
        switch (attempts) {
            case 4: lf.style.display = "none";
                break;
            case 3: rf.style.display = "none";
                break;
            case 2: la.style.display = "none";
                break;
            case 1: ra.style.display = "none";
                break;
            case 0: torso.style.display = "none";
                break;
        }
    }


</script>

</html>